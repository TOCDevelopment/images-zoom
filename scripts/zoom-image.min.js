!function(o){o.fn.zoomImage=function(e){e=o.extend({},{layerW:100,layerH:100},e),o(this).each(function(){var i=o(this).css({position:"relative"}),t=i.offset(),a=o(".img-zoom-container").data("lrgwidth"),n=o(".img-zoom-container").data("lrgheight");i.find("img").css({width:"100%",height:"100%"});var s=o("<img>").attr("src",o(".img-zoom-selected").data("hres")).css({position:"absolute",left:"0",top:"0",width:a,height:n}).attr("id","big-img"),r=o("<div>").attr("class","zoom-img-mask").css({display:"none",position:"absolute",left:"0",top:"0",width:e.layerW,height:e.layerH}),h=o("<div>").attr("class","zoom-img-magnifier").css({display:"none",position:"absolute",overflow:"hidden",left:0,top:0,width:o(".img-zoom-container .show").width(),height:o(".img-zoom-container .show").height()}).append(s);i.append(r).append(h),i.on("mousemove",function(i){var h=o(".img-zoom-container .show").width(),m=o(".img-zoom-container .show").height(),l=a/h,g=n/m,c=i.pageX-t.left,d=i.pageY-t.top;c<=e.layerW/2?c=0:c>=a-e.layerW/2?c=a-e.layerW:c-=e.layerW/2,d<e.layerH/2?d=0:d>=n-e.layerH/2?d=n-e.layerH:d-=e.layerH/2,r.css({left:c,top:d}),s.css({left:-c*l,top:-d*g})}).on("mouseenter",function(){o(".img-zoom-cover").show(),h.show()}).on("mouseleave",function(){o(".img-zoom-cover").hide(),h.hide()})})}}(jQuery);