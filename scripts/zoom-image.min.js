!function(o){o.fn.zoomImage=function(e){e=o.extend({},{layerW:100,layerH:100},e),o(this).each(function(){var t=o(this).css({position:"relative"}),i=t.offset(),a=o(".img-zoom-container").data("lrgwidth"),n=o(".img-zoom-container").data("lrgheight");t.find("img").css({width:"100%",height:"100%"});var s=o("<img>").attr("src",t.data("hres")).css({position:"absolute",left:"0",top:"0",width:a,height:n}).attr("id","big-img"),h=o("<div>").css({display:"none",position:"absolute",left:"0",top:"0",width:e.layerW,height:e.layerH}),r=o("<div>").css({display:"none",position:"absolute",overflow:"hidden",left:0,top:i.top,width:o(".img-zoom-container .show").width(),height:o(".img-zoom-container .show").height()}).append(s);t.append(h).append(r),t.on("mousemove",function(t){var r=o(".img-zoom-container .show").width(),l=o(".img-zoom-container .show").height(),m=a/r,d=n/l,g=t.pageX-i.left,c=t.pageY-i.top;g<=e.layerW/2?g=0:g>=a-e.layerW/2?g=a-e.layerW:g-=e.layerW/2,c<e.layerH/2?c=0:c>=n-e.layerH/2?c=n-e.layerH:c-=e.layerH/2,h.css({left:g,top:c}),s.css({left:-g*m,top:-c*d})}).on("mouseenter",function(){o(".img-zoom-cover").show(),r.show()}).on("mouseleave",function(){o(".img-zoom-cover").hide(),r.hide()})})}}(jQuery);